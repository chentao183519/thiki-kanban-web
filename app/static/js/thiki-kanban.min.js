"use strict";var kanbanApp=angular.module("kanbanApp",["ngRoute","entriesControllers","entriesServices","ui.sortable","tasksServices"]);kanbanApp.config(["$routeProvider",function(t){t.when("/entries",{templateUrl:"partials/entries.html",controller:"EntriesCtrl"}).when("/tasks",{templateUrl:"partials/tasks.html",controller:"TasksCtrl"}).otherwise({templateUrl:"partials/entries.html",controller:"EntriesCtrl"})}]);var entriesControllers=angular.module("entriesControllers",[]);entriesControllers.controller("EntriesCtrl",["$scope","$q","Entries","Tasks",function(t,e,r,n){var s=[],a=r.load();a.then(function(e){t.entries=e,angular.forEach(t.entries,function(t){var e=n.loadTasksByEntryId(t.id);s=s.concat(e)})}),a["finally"](function(){}),t.createEntry=function(){var e=t.title,r={id:3333,title:e,status:0};t.entries.push(r)},t.showCreateTaskForm=function(t){$("#task-create-button-"+t).hide(),$("#task-create-form-"+t).show()},t.cancelCreateTask=function(t){$("#task-create-form-"+t).hide(),$("#task-create-button-"+t).show()},t.sortableOptions={placeholder:"task",connectWith:".tasks",opacity:.5,start:function(t,e){e.item.attr("opacity","0.5")},update:function(t,e){e.item.attr("opacity","0.5")},stop:function(t,e){e.item.attr("opacity","1.0")}}}]);var entriesServices=angular.module("entriesServices",["ngResource"]);entriesServices.factory("Entries",["$http","$q",function(t,e){return{load:function(){var r=e.defer();return t({method:"GET",url:"mock/entries/entries.json"}).success(function(t,e,n,s){r.resolve(t)}).error(function(t,e,n,s){r.reject(t)}),r.promise}}}]),kanbanApp.directive("repeatFinish",["$timeout",function(t){return{restrict:"A",link:function(e,r,n){1==e.$last&&t(function(){$(".entryTitle").editable(),e.$emit("ngRepeatFinished")})}}}]);var tasksServices=angular.module("tasksServices",["ngResource"]);tasksServices.factory("Tasks",["$http","$q",function(t,e){return{loadTasksByEntryId:function(r){var n=e.defer(),s=[];return t({method:"GET",url:"mock/tasks/tasks-"+r+".json"}).success(function(t,e,r,a){s=t,n.resolve(t)}).error(function(t,e,r,s){n.reject(t)}),s}}}]);